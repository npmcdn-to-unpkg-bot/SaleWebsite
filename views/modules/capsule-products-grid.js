define(["jquery","handlebars","ajaxLoader","breakpoints","imageLoader","savedItems"],function(e,t,n,r,i,s){function E(e){m?L(e):T()}function S(){var t;return e(a,b).remove(),g!=="all"?t=e.map(GUCCI.capsuleProducts.items,function(e){var t,n=e.type.split(",");if(n.length>0)for(var r=0;r<n.length;r++)n[r]===g&&(t=e);else e.type===g&&(t=e);return t}):t=GUCCI.capsuleProducts.items,t}function x(){var t=r.is("standard")?5:r.is("medium")?3:2;e(a,b).addClass("border-right").removeClass("no-border-right").not("._hide").filter(function(e){return(e+1)%t===0}).toggleClass("border-right no-border-right")}function T(){var t,n,s;r.is("small")?t=p:r.is("medium")?t=d:t=GUCCI.capsuleProducts.maxStandard,s=S();for(var u=0;u<t&&u<s.length;u++)n=s[u],e(o,b).append(C(n));x(),i.loadImage(b),y=s.length,setTimeout(N)}function N(){var e=r.is("small")&&y<=p,t=r.is("medium")&&y<=d,n=(r.is("standard")||r.is("large"))&&y<=v;e||t||n?(w.fadeOut(h),w.parent().hide()):w.fadeIn(h)}function C(n){var r=e("script#capsule-products-detail").html(),i=t.compile(r),s=i(n);return s}function k(){g=e(this).attr("data-filter")}function L(t){var n;n=S(),e.each(n,function(t,n){e(o,b).append(C(n))}),w.fadeOut(h),w.parent().hide(),m=!0,b.addClass(l),x(),s.fillSavedItems(),i.loadImage(b),t.preventDefault()}function A(){b.on("click",c,k),b.on("click",c,E),b.on("click",f,L),T(),r.change(E)}var o=".capsule-products-grid-tiles",u=".capsule-products-grid",a=".product-tiles-grid article",f=".capsule-ajax-loader-link",l="view-all",c=".capsule-products-grid-filter-link ",h="slow",p=GUCCI.capsuleProducts.maxSmall,d=GUCCI.capsuleProducts.maxMedium,v=GUCCI.capsuleProducts.maxStandard,m=!1,g="all",y,b=e(u),w=e(f,b);return{load:function(){A()}}});
