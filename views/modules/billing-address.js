define(["jquery","viewport","breakpoints","ajaxLoader","formEndpointValidation","ajaxConfig","handlebars","overlay","tooltip"],function(e,t,n,r,i,s,o,u,a){function g(t){var n,i=e("#obtain_field_setting_url").val(),s=e("#edit_address_id").val();s!==undefined&&(t.addressId=s),n=r.endPointAccess(i,t,"POST"),n.done(function(n){var r=n,i=r.data["billing-address-fields"],s=f.attr("name"),o=l.attr("name");m.addClass("gucci-stay-hidden"),Object.keys(i).map(function(n){var r=i[n],s=c.find('[name="'+n+'"]'),u=s.prop("tagName"),a=s.attr("type"),f=s.attr("name"),l,p;if(r.show&&u!==undefined){l=s.parents("li");switch(u.toLowerCase()){case"button":s.text(r.label);break;case"input":p=l.find("label"),n=="payment-billing-alt-phone-message-alert"&&m.removeClass("gucci-stay-hidden"),r.value!==undefined&&(a==="checkbox"?r.value=="true"?s.prop("checked","true"):s.removeAttr("checked"):s.val(r.value));if(p.hasClass("noLabel"))break;a==="text"||a==="tel"?p.html(r.label):a==="checkbox"&&p.find("span").html(r.label);break;case"select":p=l.find("label");if(o===f)p.find("span").first().html(r.label);else if(p.find(".more-info").length==1){var d=p.find(".more-info");d.parent().html(r.label+d.get(0).outerHTML)}else p.html(r.label);if(n=="payment-billing-country")return;if(n=="payment-billing-alt-phone-country"||n=="payment-billing-phone-country"||n=="payment-billing-title"){r.value!=undefined?E(s,r.value):(n=="payment-billing-alt-phone-country"||n=="payment-billing-phone-country")&&t.country!=undefined&&E(s,t.country);break}if(undefined==r.options||r.options.length==0)s.find("option").not("[value='0']").remove(),s.selectric("init");r.options!==undefined&&r.options.length>0&&(s.find("option").not("[value='0']").remove(),r.options.map(function(t){e("<option>",{value:t.value}).text(t.label).appendTo(s)}),r.value!=undefined?E(s,r.value):s.selectric("init"))}l.removeClass(h)}else s.parents("li").addClass(h)}),y(),e("input[name=shipping-business-address]").is(":checked")?e(".adca-address-form-business").removeClass(h):e(".adca-address-form-business").addClass(h),a.load();var u=e(".adca-form-input-container .apo-fpo-text");u.length>0&&("US"==t.country?u.show():u.hide())}),n.fail(function(e,t,n){console.error("The following error occurred: "+t,n)})}function y(){var t=p.is(":checked");t?(d.removeClass(h),v.removeClass(h),m.hasClass("gucci-stay-hidden")||m.removeClass(h),e(this).prop("checked","checked")):(d.addClass(h),v.addClass(h),m.addClass(h),e(this).removeAttr("checked"))}function b(){p.bind("change",y),y()}function w(){b()}function E(t,n){if(n!=undefined){var r=e('option[value="'+n+'"]',t).index();t.prop("selectedIndex",r).selectric("refresh")}}var f=e(".adca-checkout-billing-address-form-input-address-two-input"),l=e(".address-states-us"),c=e(".adca-form-container-checkout-billing-address"),h="ckpy-hidden",p=e(".address-alternative-phone"),d=e(".adca-checkout-billing-address-form-alt-phone-country"),v=e(".adca-checkout-billing-address-form-alt-phone"),m=e(".adca-checkout-billing-address-form-alert-alt-phone");return{load:w(),obtainCountryFields:g}});
