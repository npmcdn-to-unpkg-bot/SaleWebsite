define(["jquery"],function(e){function g(){var t;i=e(".open-datepicker"),t=i.closest("form"),l=new Date(t.data("date-today")),c=new Date(l.getTime()),c.setTime(c.getTime()+864e5),h=c.getTime(),p=t.data("date-tomorrow-prefix"),d=l.getTime(),v=t.data("date-today-prefix"),m=GUCCI.localizedData.localizedMonths,a=new Date(i.closest("form").data("date-max")),f=a.getTime();if(i.length>0)if(!Modernizr.touch)i.each(function(){this.type="text"}),y();else if(i[0].type!=="text"){var r=l.toISOString().substring(0,10),s=a.toISOString().substring(0,10);i.val(r),i.attr("min",r),i.attr("max",s),i.siblings(".next-day, .previous-day").hide(),i.on("change",function(){var t=e(this),r=new Date(t.val()+"T00:00:00"),i,s;s=new Date(r.getTime()+r.getTimezoneOffset()*6e4),t.removeClass("error"),e(n).remove(),i=s<d||s>f,i&&(t.addClass("error"),e('<span class="error-text" id="date-error">'+t.data("date-invalid-msg")+"</span>").insertAfter(t))})}else y()}function y(){if(i.length>0){i.val(w(l)).attr(t,l);var n=GUCCI.localizedData.localizedMonths[l.getMonth()]+" "+l.getDate();s=i.Zebra_DatePicker({direction:[n,r],offset:[-40,40],default_position:"below",format:"F j",show_clear_date:!1,show_select_today:!1,show_other_months:!1,days:GUCCI.localizedData.localizedDays,first_day_of_week:0,clickable_month:!1,onSelect:function(){var n=e(this);b(n);var r=new Date(n.attr(t));E(r,n),x(r,n.data("Zebra_DatePicker"))},onOpen:function(){var t=e(this).data("Zebra_DatePicker").datepicker,n=e(t);n.attr("style",""),i.data("Zebra_DatePicker").settings.clickable_month||e("td.dp_caption",n).off("click").css("cursor","default")}}),i.each(function(){var t=e(this).data("Zebra_DatePicker"),n=t.icon,r=e(n).closest(".Zebra_DatePicker_Icon_Wrapper"),i=r,s=e(t.datepicker);s.detach(),e(r).append(s),t.$prevButton=i.siblings(o),t.$nextButton=i.siblings(u),t.$prevButton.on("click",{direction:"-1",parentDatePickerInput:this},S),t.$nextButton.on("click",{direction:"1",parentDatePickerInput:this},S),x(l,t)}),E(l,i)}}function b(e){var n=l.getFullYear(),r=new Date(e.val()+", "+n);e.attr(t,r)}function w(e){return m[e.getMonth()]+" "+e.getDate()}function E(e,t){e.getTime()===d?t.val(v+t.val()):e.getTime()===h&&t.val(p+t.val())}function S(n){var r=n.data.direction,i=e(n.data.parentDatePickerInput),s=new Date(i.attr(t));if(r==="-1"){s.setDate(s.getDate()-1);if(N(s))return!1;i.val(w(s)).attr(t,s),E(s,i)}else{s.setDate(s.getDate()+1);if(N(s))return!1;i.val(w(s)).attr(t,s),E(s,i)}x(s,i.data("Zebra_DatePicker"))}function x(e,t){var n=new Date(e.getTime()),r=new Date(e.getTime());n.setDate(e.getDate()-1),r.setDate(e.getDate()+1),T(n,t.$prevButton),T(r,t.$nextButton)}function T(e,t){N(e)?(t.attr("disabled","disabled"),t.addClass("disabled")):(t.removeAttr("disabled"),t.removeClass("disabled"))}function N(e){return i.data("Zebra_DatePicker").is_disabled(e.getFullYear(),e.getMonth(),e.getDate())}var t="data-date-string",n="#date-error",r=90,i,s={},o=".previous-day",u=".next-day",a,f,l,c,h,p,d,v,m;return{init:g}});
