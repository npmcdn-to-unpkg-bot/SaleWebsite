define(["jquery","ajaxConfig","formEndpointValidation","overlay","headerUpdate","breakpoints"],function(e,t,n,r,i,s){function c(){o=e("#product-detail-add-to-shopping-bag-form-merged"),o.unbind(),d()}function h(){a.on("click touchstart",function(e){e.stopPropagation()}),a.find('button[type="submit"]').on("click",function(){o.submit()})}function p(){o.each(function(t,n){e(n).data(m)})}function d(){o.submit(function(t){t.preventDefault(),e.get(o.attr("action"),"mergeType=add",function(e){m(e)},"json")}),o.find(u).on("click",function(){e.get(o.attr("action"),"mergeType=cancelMerge",function(e){v(e)},"json")})}function v(e){e.status&&e.status==="ok"&&(f=!1),r.close("#merging-basket-overlay")}function m(t){e("body").hasClass("template-pages-CheckoutPageTemplate")?location.reload():(t.status&&t.status==="ok"&&(i.refreshMiniCart(hybris.CSRFToken),f=!0),r.close("#merging-basket-overlay"))}function g(){return f}var o=null,u=".cancel-merging, .overlay-close-button-first",a=e(".merging-basket-overlay"),f,l;return{load:function(){c()},successAdded:function(){return g()},bindEvents:c}});
