define(["jquery","zClip","os"],function(e,t,n){function a(){s.on("click",".copyIcon",function(t){var n=e(t.currentTarget).parents(".social-overlay-link-wrapper").find(".copy-text");n&&typeof n!="undefined"&&n.select();try{var r=document.execCommand("copy"),i=r?"successful":"unsuccessful"}catch(s){console.error("Oops, unable to copy")}})}function f(e){l(e).each(c)}function l(t){return!n.supportsTouch()&&n.isFlashEnabled()?e(r,t):e()}function c(){var t=e(this);t.zclip({path:i,copy:t.find(".copy-text").text(),afterCopy:function(){d(t)}})}function h(e){l(e).each(p)}function p(){e(this).zclip("remove")}function d(e){var t="_copied";clearTimeout(o),e.addClass(t),o=setTimeout(function(){e.removeClass(t)},2500)}var r='[data-module="copyLink"]',i="/_ui/responsive/common/js/libs/jquery/ZeroClipboard.swf",s=e("body"),o=null,u=e(r).closest(".social-overlay");return{load:function(){u.on("overlay.open",function(){var t=e(this);h(t),setTimeout(function(){},600)}),u.on("overlay.close",function(){h(e(this))}),a()},buildCopyLinks:f}});
