define(["jquery","viewport","os","breakpoints"],function(e,t,n,r){var i=".giant-look",s=".contain-image",o=".product-push.top",u=".product-push.bottom",a=".product-image-wrapper",f=".product-push-content",l=e(document),c=e(window),h=e(i),p=e(s),d=e(o),v=e(u),m=h.position().top,g=-50,y=m+g,b=250,w=400,E=l.scrollTop(),S=!1,x=!0,T,N,C,k,L=125,A=0,O=g+500,M=300,_=0,D=0,P=0,H=0,B=0,j=0,F=e("html").hasClass("tablet")||e("html").hasClass("mobile"),I=0,q=function(e){return Math.log(e)/Math.LN10},R=function(){T=h.height()-b,N=p.height(),C=T-N+w,k=q(C/2)/q(50),d.length>0&&(_=d.position().top+O,D=d.height()),v.length>0&&(H=v.position().top+M,B=v.height());if(d.length>0||v.length>0)A=q(L/2)/q(50)},U=function(e){return{transform:"translateY("+e+"px)","-moz-transform":"translateY("+e+"px)","-ms-transform":"translateY("+e+"px)","-webkit-transform":"translateY("+e+"px)"}},z=function(e,t,n){var r=100*(e-t)/n,i;return r<0?(r=0,i="in"):r<50?i="in":r>100?(r=0,i="out"):r>50&&(r=100-r,i="out"),{percent:r,easing:i}},W=function(t){if(n.isIE()){var r=Math.max(document.documentElement.clientHeight,window.innerHeight||0),i=t+r,s=e(".container-blocks",h),o=e(".vignette-block:first",s).offset().top,u=e(".vignette-block:last",s),a=u.offset().top+u.height(),f=p.height(),l=h.height(),c=h.offset().top+20;i>=o&&i<=a?(I=(i-o)/(a-o)*(l-f+150),p.css({top:c-t+I+"px",position:"fixed"})):p.css({top:I+"px",position:"absolute"})}else{var d=0,v=z(t,y,T);v.percent>0&&(d=Math.pow(v.percent,k),v.easing==="out"&&(d=C-d),p.css(U(d)))}},X=function(e){var t=z(e,_,D),n=z(e,H,B);t.percent>0&&d.length>0&&(P=Math.pow(t.percent,A),t.easing==="out"&&(P=L-P),d.find(a).css(U(P)),d.find(f).css(U(P))),n.percent>0&&v.length>0&&(j=Math.pow(n.percent,A),n.easing==="out"&&(j=L-j),v.find(a).css(U(j)),v.find(f).css(U(j)))},V=function(e){W(e),(d.length>0||v.length>0)&&X(e)},$=function(){S&&(E=l.scrollTop(),V(E))},J=function(){l.off("scroll",$),p.css(U(0)),d.length>0&&(d.find(a).css(U(0)),d.find(f).css(U(0))),v.length>0&&(v.find(a).css(U(0)),v.find(f).css(U(0))),S=!1},K=function(){S?(R(),r.is("small")&&J()):!r.is("small")&&!n.supportsOrientation&&!S?Y():S&&J()},Q=function(){window.orientation===-90||window.orientation===90?h.addClass("landscape"):h.hasClass("landscape")&&h.removeClass("landscape")},G=function(e){e&&(l.on("scroll",$),n.isIE()&&l.on("mousewheel",function(){var e=event.wheelDelta,t=window.pageYOffset;window.scrollTo(0,t-e)})),x&&(x=!1,F?c.on("orientationchange",Q):c.on("resize",K))},Y=function(){R(),G(!0),S=!0},Z=function(){var t,n=0;e.each(e(".contain-carousel-giant-look li section"),function(r){t=parseInt(e(this).css("height"),10),t>=n&&(n=t)}),e(".contain-carousel-giant-look li section").css("height",n+25+"px")},et=function(){!r.is("small")&&!F?Y():G(!1),F&&(r.is("small")||(h.addClass("device"),Q()),d.length>0&&d.addClass("device"),v.length>0&&v.addClass("device"),r.is("small")&&Z())};return{load:function(){et()}}});
