define(["jquery","select","os","ajaxLoader","breakpoints","imageLoader"],function(e,t,n,r,i,s){function m(){h.selectric({disableOnMobile:!1,openOnHover:v?!1:!0,preventWindowScroll:i.is("small")||i.is("medium")?!1:!0,onInit:function(){var t=e(".sort-item").find(".selectricItems .selected").html();e(".sort-item").find(".selectric .label").html(t),i.is("small")&&e(".sort-item").find(".selectric .button").addClass("filter-close-button")},onBeforeOpen:function(){e(".filter-bar.filter-fixed").removeClass("filter-collapsed")},onOpen:function(t){e(t).parents(o).first().addClass(u),d.parent().removeClass("_open-attributes"),d.addClass(l),d.parent().addClass(c)},onClose:function(t){var n=e(".sort-item").find(".selectricItems .selected").html();e(t).parents(o).first().removeClass(u),d.removeClass(l),d.parent().removeClass(c),e(".sort-item").find(".selectric .label").html(n),e("body").removeClass("overlay-lock")},optionsItemBuilder:function(t,n){var r=e("select.sort-select").attr("data-label");return n.val().length?'<span class="sort-item-header">'+r+" </span>"+'<span class="category-item-value">'+t.text+"</span>":t.text}}),n.supportsTouch()&&S()}function g(){h.change(function(){var t=e(this);w(t)})}function y(){i.is("small")&&e(".sort-item").find(".selectricScroll").find("li").click(function(){h.selectric("open")})}function b(){p.click(function(){h.selectric("_close")})}function w(e){var t=e.val(),n=[];n.push(E),r.loadJson(t,a,e,f,!1,n)}function E(){s.loadImage(e(".product-tiles-grid"))}function S(){e(".selectricInput").prop("readonly",!0)}var o=".custom-select-parent",u="_select-active",a="product-tiles-grid-load-content",f="product-tiles-grid-item",l="_open",c="_open-sort",h=e("select.sort-select"),p=e(".sort-item").find(".filter-close-button"),d=e(".filter-attributes-sort"),v=Modernizr.touch;return{load:function(){m(),g(),y(),b()}}});
