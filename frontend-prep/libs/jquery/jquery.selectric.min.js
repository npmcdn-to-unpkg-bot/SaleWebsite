!function(e){"use strict";var t="selectric",n="Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive Above Scroll",r=".sl",i={onChange:function(t){e(t).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!0,openOnHover:!1,hoverIntentTimeout:500,expandToItemText:!1,responsive:!1,preventWindowScroll:!0,inheritOriginalWidth:!1,allowWrap:!0,customClass:{prefix:t,postfixes:n,camelCase:!0,overwrite:!0},optionsItemBuilder:"{text}"},s={add:function(e,t,n){this[e]||(this[e]={}),this[e][t]=n},remove:function(e,t){delete this[e][t]}},o={replaceDiacritics:function(e){for(var t="40-46 50-53 54-57 62-70 71-74 61 47 77".replace(/\d+/g,"\\3$&").split(" "),n=t.length;n--;)e=e.toLowerCase().replace(RegExp("["+t[n]+"]","g"),"aeiouncy".charAt(n));return e},format:function(e){var t=arguments;return(""+e).replace(/{(\d+|(\w+))}/g,function(e,n,r){return r&&t[1]?t[1][r]:t[n]})},nextEnabledItem:function(e,t){for(;e[t=(t+1)%e.length].disabled;);return t},previousEnabledItem:function(e,t){for(;e[t=(t>0?t:e.length)-1].disabled;);return t},toDash:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(n,r){var i=r.element,u=r.options["on"+n];e.isFunction(u)&&u.call(i,i,r),s[n]&&e.each(s[n],function(){this.call(i,i,r)}),e(i).trigger(t+"-"+o.toDash(n),r)}},u=e(document),a=e(window),f=function(s,f){function c(t){if(B.options=e.extend(!0,{},i,B.options,t),B.classes={},B.element=s,o.triggerCallback("BeforeInit",B),B.options.disableOnMobile&&q)return void (B.disableOnMobile=!0);E(!0);var r=B.options.customClass,u=r.postfixes.split(" "),a=j.width();e.each(n.split(" "),function(e,t){var n=r.prefix+u[e];B.classes[t.toLowerCase()]=r.camelCase?n:o.toDash(n)}),S=e("<input/>",{"class":B.classes.input,readonly:q}),x=e("<div/>",{"class":B.classes.items,tabindex:-1}),T=e("<div/>",{"class":B.classes.scroll}),N=e("<div/>",{"class":r.prefix,html:B.options.arrowButtonMarkup}),C=e('<p class="label"/>'),k=j.wrap("<div>").parent().append(N.prepend(C),x,S),H={open:m,close:y,destroy:E,refresh:p,init:c},j.on(H).wrap('<div class="'+B.classes.hideselect+'">'),e.extend(B,H),B.options.inheritOriginalWidth&&a>0&&k.width(a),h()}function h(){B.items=[];var t=j.children(),n="<ul>",i=t.filter(":selected").index();O=A=~i?i:0,(P=t.length)&&(t.each(function(t){var r=e(this),i=r.html(),s=r.prop("disabled"),u=B.options.optionsItemBuilder;B.items[t]={value:r.val(),text:i,slug:o.replaceDiacritics(i),disabled:s},n+=o.format('<li class="{1}">{2}</li>',e.trim([t==O?"selected":"",t==P-1?"last":"",s?"disabled":""].join(" ")),e.isFunction(u)?u(B.items[t],r,t):o.format(u,B.items[t]))}),x.append(T.html(n+"</ul>")),C.html(B.items[O].text)),N.add(j).add(k).add(S).off(r),k.prop("class",[B.classes.wrapper,B.options.customClass.overwrite?j.prop("class").replace(/\S+/g,B.options.customClass.prefix+"-$&"):j.prop("class"),B.options.responsive?B.classes.responsive:""].join(" ")),j.prop("disabled")?(k.addClass(B.classes.disabled),S.prop("disabled",!0)):(I=!0,k.removeClass(B.classes.disabled).on("mouseenter"+r+" mouseleave"+r,function(t){e(this).toggleClass(B.classes.hover),B.options.openOnHover&&(clearTimeout(B.closeTimer),"mouseleave"==t.type?B.closeTimer=setTimeout(y,B.options.hoverIntentTimeout):m())}),N.on("click"+r,function(e){F?y():m(e)}),S.prop({tabindex:R,disabled:!1}).on("keypress"+r,d).on("keydown"+r,function(e){d(e),clearTimeout(B.resetStr),B.resetStr=setTimeout(function(){S.val("")},B.options.keySearchTimeout);var t=e.keyCode||e.which;if(t>36&&41>t){if(!B.options.allowWrap&&(39>t&&0==A||t>38&&A+1==B.items.length))return;b(o[(39>t?"previous":"next")+"EnabledItem"](B.items,A))}}).on("focusin"+r,function(e){S.one("blur",function(){S.blur()}),F||m(e)}).on("oninput"in S[0]?"input":"keyup",function(){S.val().length&&e.each(B.items,function(e,t){return RegExp("^"+S.val(),"i").test(t.slug)&&!t.disabled?(b(e),!1):void 0})}),j.prop("tabindex",!1),L=e("li",x.removeAttr("style")).click(function(){return b(e(this).index(),!0),!1})),o.triggerCallback("Init",B)}function p(){o.triggerCallback("Refresh",B),h()}function d(e){var t=e.keyCode||e.which;13==t&&e.preventDefault(),/^(9|13|27)$/.test(t)&&(e.stopPropagation(),b(A,!0))}function v(){var e=x.closest(":visible").children(":hidden"),t=B.options.maxHeight;e.addClass(B.classes.tempshow);var n=x.outerWidth(),r=N.outerWidth()-(n-x.width());!B.options.expandToItemText||r>n?D=r:(x.css("overflow","scroll"),k.width(9e4),D=x.width(),x.css("overflow",""),k.width("")),x.width(D).height()>t&&x.height(t),e.removeClass(B.classes.tempshow)}function m(n){o.triggerCallback("BeforeOpen",B),n&&(n.preventDefault(),n.stopPropagation()),I&&(v(),e("."+B.classes.hideselect,"."+B.classes.open).children()[t]("close"),F=!0,M=x.outerHeight(),_=x.height(),S.val("").is(":focus")||S.focus(),u.on("click"+r,y).on("scroll"+r,g),g(),B.options.preventWindowScroll&&u.on("mousewheel"+r+" DOMMouseScroll"+r,"."+B.classes.scroll,function(t){var n=t.originalEvent,r=e(this).scrollTop(),i=0;"detail"in n&&(i=-1*n.detail),"wheelDelta"in n&&(i=n.wheelDelta),"wheelDeltaY"in n&&(i=n.wheelDeltaY),"deltaY"in n&&(i=-1*n.deltaY),(r==this.scrollHeight-_&&0>i||0==r&&i>0)&&t.preventDefault()}),k.addClass(B.classes.open),w(A),o.triggerCallback("Open",B))}function g(){v(),k.toggleClass(B.classes.above,k.offset().top+k.outerHeight()+M>a.scrollTop()+a.height())}function y(){if(o.triggerCallback("BeforeClose",B),O!=A){o.triggerCallback("BeforeChange",B);var e=B.items[A].text;j.prop("selectedIndex",O=A).data("value",e),C.html(e),o.triggerCallback("Change",B)}u.off(r),k.removeClass(B.classes.open),F=!1,o.triggerCallback("Close",B)}function b(e,t){B.items[e].disabled||(L.removeClass("selected").eq(A=e).addClass("selected"),w(e),t&&y())}function w(e){var t=L.eq(e).outerHeight(),n=L[e].offsetTop,r=T.scrollTop(),i=n+2*t;T.scrollTop(i>r+M?i-M:r>n-t?n-t:r)}function E(e){I&&(x.add(N).add(S).remove(),!e&&j.removeData(t).removeData("value"),j.prop("tabindex",R).off(r).off(H).unwrap().unwrap(),I=!1)}var S,x,T,N,C,k,L,A,O,M,_,D,P,H,B=this,j=e(s),F=!1,I=!1,q=/android|ip(hone|od|ad)/i.test(navigator.userAgent),R=j.prop("tabindex");c(f)};e.fn[t]=function(n){return this.each(function(){var r=e.data(this,t);r&&!r.disableOnMobile?""+n===n&&r[n]?r[n]():r.init(n):e.data(this,t,new f(this,n))})},e.fn[t].hooks=s}(jQuery);
