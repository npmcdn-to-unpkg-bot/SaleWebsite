define(["jquery"],function(e){function n(){t.each(function(){if(e(this).find(".know-card").length<2)return e(this).addClass("_single"),!1;var t=new r(e(this));s(t),i(t)})}function r(e){return this.knowCard=e.find(".know-card"),this.prevCard=e.find(".card-left"),this.nextCard=e.find(".card-right"),this.cardNavigation=e.find(".know-card-navigation"),this.cardButtons=this.cardNavigation.find(".carousel-button"),this.slideLength=this.knowCard.length,this.cardArr=this.knowCard.toArray(),this}function i(t){for(var n=0;n<t.slideLength;n++){var r=(n-t.slideLength)*-1;e(t.cardArr[n]).css({zIndex:r})}}function s(e){e.prevCard.on("click",{carousel:e,direction:"-1"},o),e.nextCard.on("click",{carousel:e,direction:"1"},o),e.cardButtons.on("click",{carousel:e,direction:"3"},o)}function o(t){var n=t.data.carousel,r=a(t.data.direction),s=t.data.direction==="3"?u(n,t):!0,o=f(t,n);if(s===!1||e(n.knowCard).is(":animated"))return!1;o.stop().animate({left:parseInt(r)*340+"px",marginTop:"1em"},500,function(){l(t),i(n),o.stop().animate({left:"0px",marginTop:"0em"})})}function u(t,n){var r=e(t.cardButtons).index(e(n.target)),i=e(t.knowCard[r]).css("z-index");if(parseInt(i)===t.slideLength)return!1}function a(e){return e==="-1"||e==="3"?"-1":"1"}function f(t,n){if(t.data.direction==="1")return e(n.cardArr[0]);if(t.data.direction==="-1")return e(n.cardArr[n.slideLength-1]);var r=e(n.cardButtons).index(e(t.target));return e(n.knowCard[r])}function l(t){var n=t.data.carousel;if(t.data.direction=="1"){var r=n.cardArr[0];n.cardArr.shift(),n.cardArr.push(r)}else if(t.data.direction==="3"){var i=e(n.cardButtons).index(e(t.target)),s=n.knowCard[i];n.cardArr.splice(e.inArray(s,n.cardArr),1),n.cardArr.unshift(s)}else{var o=n.cardArr[n.slideLength-1];n.cardArr.pop(),n.cardArr.unshift(o)}}var t=e('[data-module="cardCarousel"]');return{load:function(){n()}}});
