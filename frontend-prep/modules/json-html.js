define(["jquery","handlebars","savedItems"],function(e,t,n){function m(e,t){switch(t){case"looks-detail":return g(e,t);case"product-tiles-grid":case"product-tiles-grid-rest":case"search-results-grid":case"search-results-grid-rest":return y(e,t);case"looks-grid-item":return w(e,t);case"search-looks-grid":case"search-looks-grid-rest":return E(e,t);case"product-tiles-grid-2":case"product-tiles-grid-3":case"product-tiles-grid-reset":return b(e,t);case"header-my-account-menu":return S(e,t)}}function g(n){var s,u;o=2,d="",h=e("#product-tiles-grid").html(),p=t.compile(h),u=e.map(n[0],function(t){s=t.items,e("."+r.LOOKS_GALLERY_CLASS).removeClass().addClass(r.LOOKS_GALLERY_CLASS),o++});for(var a=0;a<s.length;a++)c=i.GRID,s[a].isFeatured!==undefined&&(c+=" "+i.GRID+i.FEATURED+s[a].isFeatured),c+=" "+i.GRID+i.MEDIUM,c+=" "+i.GRID+i.SMALL,s[a].productClass=c,s[a].productLink=i.LINK+s[a].productCode+"?listName=LookDetailsCarouselComponent&position="+(a+1),d+=p(s[a]);return e("."+r.LOOKS_GALLERY_CLASS).addClass(r.LOOKS_GALLERY_CLASS+"-"+s.length+"-items"),d+='<div class="'+r.CONTAINER_ITEMS+'"></div>',{html:d}}function y(r,s){var u=r.products;o=1,d="";var h=e("#"+s.replace("-rest","")).html(),m=typeof r.numberOfPages=="undefined"?-1:r.numberOfPages,g=typeof r.currentPage=="undefined"?-1:r.currentPage;p=t.compile(h),a=typeof u.maxStandard!="undefined"?u.maxStandard:u.items.length,f=typeof u.maxMedium!="undefined"?u.maxMedium:u.items.length,l=typeof u.maxSmall!="undefined"?u.maxSmall:u.items.length,a=a===null?u.items.length:a,v=s.indexOf("-rest")>2||m-1==g;for(var y in u.items){c=i.GRID,typeof u.items[y].isFeatured!="undefined"&&(c+=" "+i.GRID+i.FEATURED+u.items[y].isFeatured),o<=f?c+=" "+i.GRID+i.MEDIUM:c+=" "+i.GRID+i.MEDIUM+i.REMOVE,o<=l?c+=" "+i.GRID+i.SMALL:c+=" "+i.GRID+i.SMALL+i.REMOVE,u.items[y].productClass=c;if(!(o<=a))break;d+=p(u.items[y]),o++}return d+='<div class="'+i.LOAD_MORE_CONTAINER+' _no-content"></div>',e('a[href="'+s+'"]').attr("href",s+"-rest"),n.fillSavedItems(),{html:d,hideButton:v}}function b(n,r){var s=n.products;o=1,d="",h=e("#"+r).html(),p=t.compile(h),a=typeof s.maxStandard!="undefined"?s.maxStandard:s.items.length,f=typeof s.maxMedium!="undefined"?s.maxMedium:s.items.length,l=typeof s.maxSmall!="undefined"?s.maxSmall:s.items.length;for(var u in s.items){c=i.GRID,typeof s.items[u].isFeatured!="undefined"&&(c+=" "+i.GRID+i.FEATURED+s.items[u].isFeatured),o<=f?c+=" "+i.GRID+i.MEDIUM:c+=" "+i.GRID+i.MEDIUM+i.REMOVE,o<=l?c+=" "+i.GRID+i.SMALL:c+=" "+i.GRID+i.SMALL+i.REMOVE,s.items[u].productClass=c,s.items[u].productLink=i.LINK;if(!(o<=a))break;d+=p(s.items[u]),o++}return d+='<div class="'+i.LOAD_MORE_CONTAINER+' _no-content"></div>',{html:d}}function w(n,r){var i=n.looks;return u=e("."+s.GRID+":visible").length+1,v=!0,o=1,d="",h=e("#"+r).html(),p=t.compile(h),f=typeof i.maxMedium!="undefined"?i.maxMedium:i.items.length,l=typeof i.maxSmall!="undefined"?i.maxSmall:i.items.length,i.items.forEach(function(e){c=s.GRID,o<=f?c+=" "+s.GRID+s.MEDIUM:c+=" "+s.GRID+s.MEDIUM+s.REMOVE,o<=l?c+=" "+s.GRID+s.SMALL:c+=" "+s.GRID+s.SMALL+s.REMOVE,e.lookClass=c,e.haveNumbers=i.haveNumbers,e.lookLink=s.LINK,e.lookCount=u,d+=p(e),o++,u++}),d+='<div class="'+s.LOAD_MORE_CONTAINER+' _no-content"></div>',{html:d,hideButton:v}}function E(n,r){var i=n.looks;return u=e("."+s.GRID).length+1,o=1,d="",r==="search-looks-grid-rest"?v=!0:v=!1,h=e("#"+r).html(),p=t.compile(h),f=typeof i.maxMedium!="undefined"?i.maxMedium:i.items.length,l=typeof i.maxSmall!="undefined"?i.maxSmall:i.items.length,i.items.forEach(function(e){c=s.GRID,o<=f?c+=" "+s.GRID+s.MEDIUM:c+=" "+s.GRID+s.MEDIUM+s.REMOVE,o<=l?c+=" "+s.GRID+s.SMALL:c+=" "+s.GRID+s.SMALL+s.REMOVE,e.lookClass=c,e.haveNumbers=i.haveNumbers,e.lookLink=s.LINK,e.lookCount=u,d+=p(e),o++,u++}),d+='<div class="'+s.LOAD_MORE_CONTAINER+' _no-content"></div>',e('a[href="'+r+'"]').attr("href",r+"-rest"),{html:d,hideButton:v}}function S(n,r){var i=n.myOrders,s=n.favoritesCount,o={};return o.myOrders=i,o.favoritesCount=s,h=e("#"+r).html(),p=t.compile(h),{html:p(o)}}var r={LOOKS_GALLERY_CLASS:"look-gallery",CONTAINER_ITEMS:"content-looks-gallery-items"},i={GRID:"product-tiles-grid-item",MEDIUM:"-medium",SMALL:"-small",REMOVE:"-remove",FEATURED:"-featured",LINK:"/-p-",LOAD_MORE_CONTAINER:"product-tiles-grid-load-content"},s={GRID:"looks-grid-item",MEDIUM:"-medium",SMALL:"-small",REMOVE:"-remove",LINK:"/look/",LOAD_MORE_CONTAINER:"looks-grid-load-content"},o=1,u=1,a,f,l,c="",h="",p="",d="",v=!1;return{compiler:function(e,t){return m(e,t)}}});
