define(["jquery","ajaxConfig"],function(e,t){function l(){c()}function c(){e("body").on("click.save-item","[data-"+n+"]",e.proxy(h))}function h(t){t.preventDefault();var n=e(this);if(n.hasClass("js-loading"))return;n.hasClass(r)?d(n):g(n)}function p(t,r,i,s){var u=r.attr("data-"+n),a;r.addClass(f);var l=e("#CSRFToken").val();if(e("#product-details-selected-size")&&!r.hasClass("send-original")&&r.hasClass("main-product")){var c=e("#product-details-selected-size").val();c!=-1&&c!==undefined&&(u=c)}a=e.ajax({url:t,type:o,data:{productId:u,CSRFToken:""+l},dataType:"json"}),a.done(function(e){r.removeClass(f),i(r,e)}),a.fail(function(e){r.removeClass(f),s(r,e)})}function d(e){e.removeClass(r),p(s,e,v,m)}function v(t,n){n.status&&n.status==="ok"?e(window).trigger(a,[n,t]):t.addClass(r)}function m(e){e.addClass(r)}function g(e){e.addClass(r),p(i,e,y,b)}function y(t,n){n.status&&n.status==="ok"?e(window).trigger(u,[n,t]):t.removeClass(r),t.data("reload")===!0&&window.location.reload(!0)}function b(e){e.removeClass(r)}var n="save-item",r="_active",i=t.getRemoteService("SAVED-ITEMS-SAVE-ENDPOINT"),s=t.getRemoteService("SAVED-ITEMS-REMOVE-ENDPOINT"),o=t.mainSubmitMethod(),u="saved-item.save",a="saved-item.remove",f="js-loading";l()});
