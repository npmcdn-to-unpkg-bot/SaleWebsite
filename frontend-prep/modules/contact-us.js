define(["jquery","ajaxConfig","formEndpointValidation","overlay","handlebars","datePickerModule"],function(e,t,n,r,i,s){function G(e){var t=e.attr("id");return t===undefined&&(t=e.attr("class")),t.replace(/.*-([0-9]+).*/,"$1")}function Y(){e("div.schedule-callback-overlay, section.client-services-schedule-callback-overlay, div.may-we-help-schedule-callback").each(function(){var t=e(this),n=G(t);e(".email-us-text-area",t).on("keyup",tt),Z(t,e(".contact-form-order-number",t),e(".callback-confirmation-container",t),e(".schedule-callback-form",t)),ot(t)}),e("div.email-us-overlay, section.client-services-email-us-overlay, div.may-we-help-email-us").each(function(){var t=e(this),n=G(t);e(".email-us-text-area",t).on("keyup",tt),Z(t,e(".contact-form-order-number",t),e(".email-us-confirmation-container",t),e(".email-us-form",t)),ot(t)}),e(".overlay-content").on("click",function(){et(y)})}function Z(t,n,r,i){e("#first-name",t).on("keyup",function(){rt(this,M)}),e("#last-name",t).on("keyup",function(){rt(this,_)}),e("#subject",t).on("change",function(){e(this).val().indexOf("order-number")>=0?n.css("display","inline-block"):n.css("display","none")});var s=G(t);nt(),e(".edit-info-link",t).each(function(){e(this).on("click",function(){r.fadeOut({done:function(){i.fadeIn(),e("#schedule-callback-overlay-"+s+" .client-services-tools-wrapper").show(),e("#email-us-overlay-"+s+" .client-services-tools-wrapper").css("display","block")}})})})}function et(){e(".selectricWrapper",".overlay-content").filter(".selectricOpen").find("select").each(function(){e(this).selectric("close")})}function tt(t,n){var r=n?n:e(this),i=r.val(),s=i.length,o=r.closest(".contact-form-inquiry").find(".inquiry-counter");if(s>D){var u=i.substr(0,D);e(this).val(u),e(".client-services-email-us._active .email-us-text-area").val(u)}else o.text(D-s)}function nt(){R.on("change",function(){var t=e(this).val(),n=window.location.pathname+"?"+z+"="+t;window.location.href=n})}function rt(e,t){e.value.length>t&&(e.value=e.value.substring(0,t))}function it(t){var n=e(".schedule-callback-form",t);e(".open-datepicker",n).val(U),n.find("#time, #language, #subject").each(function(){e(this).prop("selectedIndex",0),e(this).change(),e(this).selectric("refresh")}),e(".contact-form-order-number",t).val(""),n.find("#order-number").val(""),$[t.attr("id")].clearErrorMessages(),ot(t)}function st(t){var n=e(".email-us-text-area",t).closest(".contact-form-inquiry").find(".inquiry-counter");e(".email-us-form",t).find("#subject").prop("selectedIndex",0).change().selectric("refresh"),e(".contact-form-order-number",t).val(""),e(".email-us-text-area",t).val(""),n.text(D),e(".email-us-form",t).find("#order-number").val(""),$[t.attr("id")].clearErrorMessages(),ot(t)}function ot(t){e("#country-code",t).find('option[value="'+I+'"]').prop("selected",!0),e("#country-code",t).change(),e("#country-code",t).selectric("refresh")}function ut(t){switch(t.status){case"ok":e.event.trigger({type:"formOk",form:this.$form});var n=this.$form.parents(".schedule-callback-overlay");e(".schedule-callback-form",n).fadeOut({done:function(){var r=i.compile(A);e(".confirmation-data-container",n).html(r(t.data)),e(".client-services-tools-wrapper",n).css("display","none"),e(".callback-confirmation-container",n).fadeIn()}});break;case"validationError":return!1}}function at(t){switch(t.status){case"ok":e.event.trigger({type:"formOk",form:this.$form});var n=this.$form.parents(".email-us-overlay, .may-we-help-email-us");e(".email-us-form",n).fadeOut({done:function(){var r=i.compile(O);e(".confirmation-data-container",n).html(r(t.data)),e(".client-services-tools-wrapper",n).css("display","none"),e(".email-us-confirmation-container",n).fadeIn()}});break;case"validationError":return!1}}function ft(t){t||(t=e(".schedule-callback-overlay, .may-we-help-schedule-callback")),t.each(function(){var t=e(this);e(".callback-confirmation-container",t).css("display","none"),e(".schedule-callback-form",t).css("display","block"),it(t)})}function lt(t){t||(t=e(".email-us-overlay")),t.each(function(){var t=e(this);e(".email-us-confirmation-container",t).css("display","none"),e(".email-us-form",t).css("display","block"),st(t)})}function ct(){V&&(V=!1,I=b.data("country"),U=L.val(),Y(),r.onClose(function(t){t.is(".schedule-callback-overlay")?ft(t):t.is(".email-us-overlay")?lt(t):t.is("#may-we-help-overlay")?(ft(),lt()):t.is("#client-services-overlay")&&(lt(),ft(),e(".schedule-callback-form, .email-us-form, .client-services-tools-wrapper",t).css("display","block"),e(".callback-confirmation-container, .email-us-confirmation-container",t).css("display","none"))}),s.init(),e("select",".overlay-content").on("selectric-before-open",et),e("select.custom_cu").selectric())}function ht(){var t=window.location.hash,n=t.substring(t.indexOf("#"));e("html, body").animate({scrollTop:e(n).offset().top})}var o="schedule-callback-overlay",u="email-us-overlay",a="client-services-overlay",f="may-we-help-overlay",l="#"+o,c="#"+u,h="may-we-help-schedule-callback",p="may-we-help-email-us",d="."+h,v="."+p,m=e(l).add(d).add(".client-services-schedule-callback-overlay"),g=e(c).add(v).add(".client-services-email-us-overlay"),y=m.add(g),b=e(".schedule-callback-form",m),w=e(".email-us-form",g),E=e(".client-services-tools-wrapper",g),S=e(".client-services-tools-wrapper",m),x=e(".email-us-text-area",g),T=e(".callback-confirmation-container",m),N=e(".confirmation-data-container",T),C=e(".email-us-confirmation-container",C),k=e(".confirmation-data-container",C),L=e(".open-datepicker",b),A=e("#contact-us-shedule-call-confirmation").html(),O=e("#contact-us-email-us-confirmation").html(),M=30,_=50,D=400,P=e(".contact-form-order-number",m),H=e(".contact-form-order-number",g),B=e("#country-code",m),j=t.getRemoteService("CALL-BACK-ENDPOINT"),F=t.getRemoteService("EMAIL-US-ENDPOINT"),I,q=e("section.contact-us"),R=e("#country",q),U,z="location",W,X,V=!0,$={},J=e("."+u),K="#page",Q=navigator.userAgent.match(/(iPad|iPhone|iPod touch);.*CPU.*OS.*8/)?!0:!1;return{load:function(){J.length>0&&J.each(function(){e(this).detach().insertAfter(K)}),e("#"+f).on("overlay.open",ct),e("."+o).on("overlay.open",ct),e("."+u).on("overlay.open",ct),e("#"+a).on("overlay.open",ct),e(".schedule-callback-overlay, .may-we-help-schedule-callback").each(function(){var t=e(this);e(".schedule-callback-form",t).prop("action",j),$[t.attr("id")]=n.newInstance(e(".schedule-callback-form",t),ut,ut)}),e(".email-us-overlay, .may-we-help-email-us").each(function(){var t=e(this);e(".email-us-form",t).prop("action",F),$[t.attr("id")]=n.newInstance(e(".email-us-form",t),at,at)}),nt()},handleTextAreaLimit:function(e,t){tt(e,t)}}});
