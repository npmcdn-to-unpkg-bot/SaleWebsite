define(["jquery","tooltip"],function(e,t){function d(){var t=e("#payment-credit-card-type"),n=e("#input-credit-card-number").val(),r;m(t.val(),n)||(g(n)?r="003":b(n)?r="004":w(n)?r="014":E(n)?r="007":S(n)?r="002":x(n)?r="001":y(n)&&(e('option[value="005"]',t).length>0&&e('option[value="006"]',t).length>0?r=undefined:e('option[value="005"]',t).length>0?r="005":e('option[value="006"]',t).length>0&&(r="006")));if(r!==undefined){var i=e('option[value="'+r+'"]',t).index();t.prop("selectedIndex",i).selectric("refresh")}v(t.val(),n)}function v(){var t=e("#payment-credit-card-type").val(),n=e("#input-credit-card-number").val(),r=!0;return e("#payment-credit-card-type").removeClass("error"),e("#payment-credit-card-type").next().removeClass("_active"),t!==0&&e("#payment-credit-card-type").next().css({display:"none"}),n===undefined||n===""?!0:(e("#input-credit-card-number").removeClass("error"),e("#input-credit-card-number").next().removeClass("_active"),T(n)||(r=!1),m(t,n)||(r=!1),r?!0:(e("#payment-credit-card-type").addClass("error"),e("#payment-credit-card-type").next().addClass("_active"),e("#input-credit-card-number").addClass("error"),!1))}function m(e,t){var n=!0;if(e===undefined||e=="0")return!1;switch(e){case"003":n=g(t);break;case"005":case"006":n=y(t);break;case"004":n=b(t);break;case"014":n=w(t);break;case"007":n=E(t);break;case"002":n=S(t);break;case"001":n=x(t);break;default:n=!0}return n}function g(e){return e!==undefined&&e.length==15?e.indexOf("34")===0||e.indexOf("37")===0:!1}function y(e){return e!==undefined&&e.length==14?e.charAt(0)=="3"&&(e.charAt(1)=="0"||e.charAt(1)=="6"||e.charAt(1)=="8"):!1}function b(e){if(e!==undefined&&e.length==16){var t=parseInt(e.substring(0,8),10);if(t>=6011e4&&t<=60119999||t>=65e6&&t<=65999999||t>=62212600&&t<=62292599)return!0}return!1}function w(e){if(e!==undefined&&e.length==15){var t=parseInt(e.substring(0,4),10);return t==2014||t==2149}return!1}function E(e){if(e!==undefined&&e.length==16){var t=parseInt(e.substring(0,4),10),n=parseInt(e.substring(0,8),10);return t==3088||t==3096||t==3112||t==3158||t==3337||n>=3528e4&&n<=35899999}return!1}function S(e){if(e!==undefined&&e.length==16){var t=parseInt(e.charAt(1),10);return e.charAt(0)=="5"&&t>=1&&t<=5}return!1}function x(e){return e===undefined||e.length!=16&&e.length!=13?!1:e.charAt(0)=="4"}function T(e){var t=function(e){return function(t){var n=t.length,r=1,i=0,s;while(n)s=parseInt(t.charAt(--n),10),i+=(r^=1)?e[s]:s;return i&&i%10===0}}([0,2,4,6,8,1,3,5,7,9]);return t(e)}function N(t,n){n=="hide"?(e(t).removeClass("error"),e(t).next().removeClass("_active"),e(t).next().css({display:"none"})):(e(t).addClass("error"),e(t).next().addClass("_active"),e(t).next().css({display:"block"}))}function C(){e(".tooltip-help").css({display:"none"})}function k(){e("#input-credit-card-number").on("change",d),e("#payment-credit-card-type").on("change",v),e(".account-data-card-add-cta").on("click",C)}function L(){k()}var n="#input-credit-card-name",r="#input-credit-card-code",i="#card_expirationYear",s="#card_expirationMonth",o='select[name="payment-billing-title"]',u='input[name="payment-billing-address-last-name"]',a='input[name="payment-billing-address-address"]',f='select[name="payment-billing-province"]',l='input[name="payment-billing-address-zip-code"]',c='input[name="payment-billing-address-phone"]',h='input[name="payment-billing-address-city"]',p='input[name="payment-billing-address-name"]';return{load:L(),validate:v}});
