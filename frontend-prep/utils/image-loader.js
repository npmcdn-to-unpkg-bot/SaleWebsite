define(["jquery","breakpoints","os"],function(e,t,n){function h(){a||(a=!0,m()),g()}function p(t){var n=d(),r="._loaded";setTimeout(function(){u&&c===!1&&e(".touch-remove").remove()},1),u&&(r+=", ._hover"),o=t.find("[data-src]").not(r),o.each(function(){e(this).is("img")?e(this).attr("src",v(e(this),n)).addClass("_loaded"):e(this).css("background-image","url("+v(e(this),n)+")")})}function d(){for(var e in f)if(t.is(e))return e;return""}function v(e,t,n){var r=n&&n!="data-src"?n+"_":i,o=r+t;return l===!0&&(o+=s),e.attr(o)}function m(){e("[data-src]").removeClass("_loaded"),p(e("body"))}function g(){t.change(m)}var r="data-src",i=r+"_",s="_retina",o=null,u=n.supportsTouch(),a=!1,f={standard:!0,medium:!0,small:!0},l=t.is("retina"),c=!1;return setTimeout(function(){if(e("html").hasClass("desktop"))var t=!0;else var t=!1},1),h(),{load:h,loadImage:p}});
