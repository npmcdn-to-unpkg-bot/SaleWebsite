define(["dispatcher","viewport"],function(e,t){function s(){n=o(),t.resize(a)}function o(){var e={},t={};for(var n=i.length-1;n>-1;n--)t=i[n],e[t.getAttribute("data-breakpoint")]=u(t);return e}function u(e){return e.offsetWidth!==0||e.offsetHeight!==0}function a(){var t=f();if(t.entered.length||t.left.length)n=o(),e.fireCallbacks(r.change);l("enter",t.entered),l("leave",t.left)}function f(){var e=o(),t={entered:[],left:[]};for(var r in e)n[r]!==e[r]&&(e[r]?t.entered.push(r):t.left.push(r));return t}function l(t,n){var i="",s=[];for(var o=n.length-1;o>-1;o--)i=n[o],r[t][i]&&(s=r[t][i],e.fireCallbacks(s,i))}function c(e,t,n){r[e][t]||(r[e][t]=[]),r[e][t].indexOf(n)===-1&&r[e][t].push(n)}var n={},r={change:[],enter:{},leave:{}},i=document.querySelectorAll(".breakpoint");return s(),{change:function(e){r.change.push(e)},enter:function(e,t){c("enter",e,t)},leave:function(e,t){c("leave",e,t)},is:function(e){return n[e]!==undefined&&n[e]}}});
